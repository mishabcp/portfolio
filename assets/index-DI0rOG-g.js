const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Utils-DenBE59v.js","assets/index-XgrrP6Ri.js","assets/index-BttXQbzh.css","assets/ImageDrawer-B3LZqJ09.js"])))=>i.map(i=>d[i]);
import{m,I as l,j as I,_ as d}from"./index-XgrrP6Ri.js";const y=0,h=1,L=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function b(r,e,o){const{svgData:n}=r;if(!n)return"";const s=I(e,o);if(n.includes("fill"))return n.replace(L,()=>s);const t=n.indexOf(">");return`${n.substring(y,t)} fill="${s}"${n.substring(t)}`}async function i(r){return new Promise(e=>{r.loading=!0;const o=new Image;r.element=o,o.addEventListener("load",()=>{r.loading=!1,e()}),o.addEventListener("error",()=>{r.element=void 0,r.error=!0,r.loading=!1,m().error(`${l} loading image: ${r.source}`),e()}),o.src=r.source})}async function p(r){if(r.type!=="svg"){await i(r);return}r.loading=!0;const e=await fetch(r.source);e.ok?r.svgData=await e.text():(m().error(`${l} Image not found`),r.error=!0),r.loading=!1}function P(r,e,o,n){var g;const s=b(r,o,((g=n.opacity)==null?void 0:g.value)??h),t={color:o,gif:e.gif,data:{...r,svgData:s},loaded:!1,ratio:e.width/e.height,replaceColor:e.replaceColor,source:e.src};return new Promise(f=>{const _=new Blob([s],{type:"image/svg+xml"}),c=URL||window.URL||window.webkitURL||window,u=c.createObjectURL(_),a=new Image;a.addEventListener("load",()=>{t.loaded=!0,t.element=a,f(t),c.revokeObjectURL(u)});const v=async()=>{c.revokeObjectURL(u);const w={...r,error:!1,loading:!0};await i(w),t.loaded=!0,t.element=w.element,f(t)};a.addEventListener("error",()=>void v()),a.src=u})}const x=Object.freeze(Object.defineProperty({__proto__:null,downloadSvgImage:p,loadImage:i,replaceImageColor:P},Symbol.toStringTag,{value:"Module"})),E=3;function O(r){r.loadImage||(r.loadImage=async e=>{if(!e.name&&!e.src)throw new Error(`${l} no image source provided`);if(r.images||(r.images=[]),!r.images.find(o=>o.name===e.name||o.source===e.src))try{const o={gif:e.gif??!1,name:e.name??e.src,source:e.src,type:e.src.substring(e.src.length-E),error:!1,loading:!0,replaceColor:e.replaceColor,ratio:e.width&&e.height?e.width/e.height:void 0};r.images.push(o);let n;if(e.gif){const{loadGifImage:s}=await d(async()=>{const{loadGifImage:t}=await import("./Utils-DenBE59v.js");return{loadGifImage:t}},__vite__mapDeps([0,1,2]));n=s}else n=e.replaceColor?p:i;await n(o)}catch{throw new Error(`${l} ${e.name??e.src} not found`)}})}async function R(r,e=!0){O(r);const{ImagePreloaderPlugin:o}=await d(async()=>{const{ImagePreloaderPlugin:t}=await import("./ImagePreloader-wDGOXDcw.js");return{ImagePreloaderPlugin:t}},[]),{ImageDrawer:n}=await d(async()=>{const{ImageDrawer:t}=await import("./ImageDrawer-B3LZqJ09.js");return{ImageDrawer:t}},__vite__mapDeps([3,0,1,2])),s=new o(r);await r.addPlugin(s,e),await r.addShape(["image","images"],new n(r),e)}const C=Object.freeze(Object.defineProperty({__proto__:null,loadImageShape:R},Symbol.toStringTag,{value:"Module"}));export{x as U,C as i,P as r};
